# Go Web Template é¡¹ç›®ä»‹ç»

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯åŸºäº GoFrame v2 æ¡†æ¶çš„ç§åŸŸèŠå¤©å¹³å°ï¼Œå‚è€ƒ go-novel çš„æ¶æ„è®¾è®¡ï¼Œé‡‡ç”¨åˆ†å±‚è®¾è®¡æ¨¡å¼ï¼Œæ”¯æŒ API æœåŠ¡å™¨ã€ç®¡ç†åå°å’Œé™æ€èµ„æºæœåŠ¡çš„åˆ†ç¦»éƒ¨ç½²ã€‚

### ä¸»è¦åŠŸèƒ½éœ€æ±‚

**è®¿é—®æ§åˆ¶**ï¼š
- è¿›å…¥ç½‘é¡µå¿…é¡»è¾“å…¥æ­£ç¡®çš„å¯†é’¥/å¯†ç /æš—å·
- å¯†é’¥/å¯†ç /æš—å·å¯é…ç½®ä¸”å¯è®¾ç½®æœ‰æ•ˆæœŸ
- å®ç°ç§åŸŸä¸ªäººç«™ç‚¹è®¿é—®æ§åˆ¶

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- ğŸ¤– **AIæœç´¢** - æ™ºèƒ½æœç´¢åŠŸèƒ½
- ğŸ¨ **AIç”Ÿå›¾** - AIå›¾åƒç”ŸæˆåŠŸèƒ½  
- ğŸ“¹ **AIè§†é¢‘** - AIè§†é¢‘ç”ŸæˆåŠŸèƒ½
- ğŸ’¬ **ç¾¤èŠ** - å¹¿æ’­ç¾¤èŠï¼Œæ— éœ€å»ºç¾¤ï¼Œä½¿ç”¨ç›¸åŒå¯†é’¥çš„ç”¨æˆ·è‡ªåŠ¨ç»„æˆç¾¤èŠ
- ğŸ”’ **ç§èŠ** - ç”¨æˆ·é—´ç§äººèŠå¤©åŠŸèƒ½
- ğŸ™ï¸ **éŸ³è§†é¢‘èŠå¤©** - æ”¯æŒå®æ—¶éŸ³é¢‘å’Œè§†é¢‘é€šè¯ï¼Œé€šè¿‡WebSocketå®ç°ä¿¡ä»¤æ§åˆ¶

**è®¾å¤‡å…¼å®¹**ï¼š
- PCå’Œç§»åŠ¨ç«¯å…¼å®¹
- çº¯ç½‘é¡µå½¢å¼ï¼Œæ— éœ€å®‰è£…APP

### ç”¨æˆ·å·¥ä½œæµç¨‹

1. **ç”¨æˆ·è®¿é—®** â†’ æ‰“å¼€ç½‘ç«™ï¼Œå‰ç«¯JSè‡ªåŠ¨æ”¶é›†è®¾å¤‡ä¿¡æ¯
2. **è®¾å¤‡æŒ‡çº¹** â†’ å‰ç«¯è®¡ç®—è®¾å¤‡æŒ‡çº¹å¹¶å‘é€ç»™åç«¯  
3. **èº«ä»½ç”Ÿæˆ** â†’ åç«¯åŸºäºè®¾å¤‡æŒ‡çº¹ç”Ÿæˆå›ºå®šçš„ access_key
4. **å»ºç«‹è¿æ¥** â†’ ç”¨æˆ·è·å¾—å›ºå®šèº«ä»½æ ‡è¯†ï¼Œå¯ä»¥å¼€å§‹èŠå¤©äº¤äº’

é€šè¿‡è®¾å¤‡æŒ‡çº¹æŠ€æœ¯ï¼Œç¡®ä¿æ¯ä¸ªè®¾å¤‡éƒ½æœ‰å”¯ä¸€ä¸”å›ºå®šçš„èº«ä»½æ ‡è¯†ï¼Œå®ç°å…æ³¨å†Œçš„ç¨³å®šç”¨æˆ·ä½“ç³»ã€‚

**## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: GoFrame v2
- **æ•°æ®åº“**: MySQL + GORM
- **ç¼“å­˜**: Redis
- **æ—¥å¿—**: Zap Logger (é«˜çº§æ—¥å¿—è½®è½¬)
- **æ¶ˆæ¯é˜Ÿåˆ—**: NSQ
- **WebSocket**: Gorilla WebSocket (æ¨èæ ‡å‡†åº“)
- **éŸ³è§†é¢‘é€šä¿¡**: WebRTC + WebSocketä¿¡ä»¤
- **é…ç½®ç®¡ç†**: YAML**


## æ¶æ„è®¾è®¡

### æœåŠ¡å™¨æ¶æ„

é¡¹ç›®é‡‡ç”¨ä¸‰æœåŠ¡å™¨åˆ†ç¦»æ¶æ„ï¼š

1. **APIæœåŠ¡å™¨** (`:8080`) - å¤„ç†å‰ç«¯APIè¯·æ±‚
2. **ç®¡ç†åå°æœåŠ¡å™¨** (`:8081`) - å¤„ç†åå°ç®¡ç†åŠŸèƒ½
3. **é™æ€èµ„æºæœåŠ¡å™¨** (`:8082`) - æä¾›å›¾ç‰‡ç­‰é™æ€èµ„æºï¼Œåœ¨bootstrapä¸­åå°å¯åŠ¨

### å¯åŠ¨æµç¨‹

```
å¯åŠ¨æ–‡ä»¶ -> dbåŒ… -> serveråŒ… -> bootstrapåŒ… -> å…·ä½“åˆå§‹åŒ–
```

**è°ƒç”¨é“¾è·¯:**
- `api.go` -> `db.StartAPIServer()` -> `server.StartAPIServer()` -> `bootstrap.StartAPIServer()`
- `admin.go` -> `db.StartAdminServer()` -> `server.StartAdminServer()` -> `bootstrap.StartAdminServer()`

### å…¨å±€å˜é‡ç®¡ç†

å‚è€ƒgo-novelçš„global.goè®¾è®¡ï¼Œç»Ÿä¸€ç®¡ç†å…¨å±€èµ„æºï¼š

- `global.DB` - GORMæ•°æ®åº“è¿æ¥
- `global.Redis` - Rediså®¢æˆ·ç«¯
- `global.NsqPro` - NSQæ¶ˆæ¯é˜Ÿåˆ—
- `global.KeyLock` - åˆ†å¸ƒå¼é”
- `global.Ws` - WebSocketè¿æ¥ (ä½¿ç”¨Gorilla WebSocket)
- å„ç§ä¸“ç”¨æ—¥å¿—è®°å½•å™¨ï¼š`Errlog`ã€`Sqllog`ã€`Requestlog`ç­‰

## æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ åˆ†å±‚æ¶æ„
- **Controllerå±‚**: æ¥å£æ§åˆ¶ï¼Œå‚æ•°å¤„ç†
- **Serviceå±‚**: ä¸šåŠ¡é€»è¾‘ï¼Œæ•°æ®å¤„ç†
- **Modelå±‚**: æ•°æ®æ¨¡å‹ï¼Œç»“æ„ä½“å®šä¹‰
- **Routerå±‚**: è·¯ç”±é…ç½®ï¼Œåˆ†ç»„ç®¡ç†

### ğŸ“Š é«˜çº§æ—¥å¿—ç³»ç»Ÿ
- **åŸºäºgo-novelçš„zaplog**: ä»go-novelè¿ç§»çš„æˆç†Ÿæ—¥å¿—è§£å†³æ–¹æ¡ˆ
- **æ—¥å¿—è½®è½¬**: æ”¯æŒæŒ‰å¤§å°ã€æ—¶é—´è‡ªåŠ¨è½®è½¬
- **åŒè¾“å‡º**: åŒæ—¶è¾“å‡ºåˆ°æ–‡ä»¶å’Œæ§åˆ¶å°
- **æŒ‰æ—¥æœŸåˆ†å‰²**: æ—¥å¿—æ–‡ä»¶æŒ‰æ—¥æœŸè‡ªåŠ¨å‘½å
- **æ¨¡å—åŒ–åˆ†ç±»**: 14ä¸ªä¸“ç”¨æ—¥å¿—è®°å½•å™¨ï¼ŒæŒ‰ä¸šåŠ¡æ¨¡å—åˆ†ç¦»
- **ZincSearchæ”¯æŒ**: å¯é€‰çš„æ—¥å¿—æœç´¢å’Œåˆ†æåŠŸèƒ½

### ğŸŒ WebSocketæ”¯æŒ
- **Gorilla WebSocket**: ä½¿ç”¨Goç”Ÿæ€æ ‡å‡†WebSocketåº“
- **å®Œæ•´åè®®æ”¯æŒ**: æ”¯æŒæ‰€æœ‰WebSocketç‰¹æ€§
- **é«˜æ€§èƒ½**: ç»è¿‡å¤§é‡ç”Ÿäº§ç¯å¢ƒéªŒè¯
- **æ˜“äºé›†æˆ**: ä¸GoFrameå®Œç¾é›†æˆ

### âš™ï¸ é…ç½®ç®¡ç†
- **YAMLé…ç½®**: ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶ç®¡ç†
- **å¤šç¯å¢ƒæ”¯æŒ**: æ”¯æŒå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒé…ç½®
- **çƒ­é‡è½½**: æ”¯æŒé…ç½®æ–‡ä»¶çƒ­é‡è½½

## é…ç½®æ–‡ä»¶ç»“æ„

```yaml
# æœåŠ¡å™¨é…ç½®
server:
  api:
    address: ":8080"
    name: "APIæœåŠ¡å™¨"
  admin:
    address: ":8081"
    name: "åå°ç®¡ç†æœåŠ¡å™¨"
  source:
    address: ":8082"
    serverRoot: "public"
    name: "é™æ€èµ„æºæœåŠ¡å™¨"

# æ•°æ®åº“é…ç½®
database:
  default:
    type: mysql
    host: 127.0.0.1
    port: 3306
    user: root
    pass: root
    name: template_chat
    charset: utf8mb4
    prefix: ls_
    debug: true

# Redisé…ç½®
redis:
  default:
    address: "127.0.0.1:6379"
    db: 0
    password: ""

# æ—¥å¿—é…ç½®
logs:
  level: -1  # -1:Debug, 0:Info, 1:Warn, 2:Error
  path: logs
  max-size: 50      # æ–‡ä»¶æœ€å¤§å¤§å°(MB)
  max-backups: 100  # å¤‡ä»½æ•°
  max-age: 30       # å­˜æ”¾æ—¶é—´(å¤©)
  compress: false   # æ˜¯å¦å‹ç¼©
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Go 1.23.0+
- MySQL 5.7+
- Redis 6.0+

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd go-web-template
```

2. **å®‰è£…ä¾èµ–**
```bash
go mod tidy
```

3. **è¿æ¥æ•°æ®åº“**
```bash
# æ•°æ®åº“å·²å­˜åœ¨ï¼Œç›´æ¥è¿æ¥æŸ¥çœ‹
USE template_chat;
SHOW TABLES;  # æŸ¥çœ‹ç°æœ‰æ•°æ®è¡¨
```

4. **åˆ›å»ºå¿…è¦ç›®å½•**
```bash
mkdir -p logs public/uploads
```

5. **å¯åŠ¨æœåŠ¡**
```bash
# å¯åŠ¨APIæœåŠ¡å™¨
go run api.go

# å¯åŠ¨ç®¡ç†åå°æœåŠ¡å™¨  
go run admin.go
```

### è®¿é—®åœ°å€
- **APIæœåŠ¡å™¨**: http://localhost:8080
- **ç®¡ç†åå°**: http://localhost:8081
- **é™æ€èµ„æº**: http://localhost:8082

## æ•°æ®åº“è®¾è®¡

é¡¹ç›®åŒ…å«ä»¥ä¸‹ä¸»è¦æ•°æ®è¡¨ï¼š

- `ls_user` - ç”¨æˆ·è¡¨
- `ls_product` - äº§å“è¡¨
- `ls_ai_chat_log` - AIèŠå¤©è®°å½•
- `ls_ai_work` - AIå·¥ä½œä»»åŠ¡
- `ls_chat_message` - èŠå¤©æ¶ˆæ¯
- `ls_config` - ç³»ç»Ÿé…ç½®
- `ls_file_cate` - æ–‡ä»¶åˆ†ç±»
- `ls_file` - æ–‡ä»¶è¡¨
- `ls_meeting_room` - ä¼šè®®å®¤
- `ls_secret_key` - å¯†é’¥ç®¡ç†
- `ls_user_note` - ç”¨æˆ·ç¬”è®°
- `ls_user_session` - ç”¨æˆ·ä¼šè¯

## å¼€å‘è§„èŒƒ

è¯¦ç»†çš„å¼€å‘è§„èŒƒè¯·æŸ¥çœ‹ [CLAUDE_DEV.md](./CLAUDE_DEV.md) æ–‡æ¡£ã€‚

## ç‰ˆæœ¬ä¿¡æ¯

- **Goç‰ˆæœ¬**: 1.23.0
- **GoFrameç‰ˆæœ¬**: v2.9.3
- **WebSocketåº“**: github.com/gorilla/websocket (æ¨è)
- **æ—¥å¿—ç³»ç»Ÿ**: åŸºäºgo-novelçš„zaplogé«˜çº§å®ç°
- **åˆ›å»ºæ—¥æœŸ**: 2025-09-09
- **æœ€åæ›´æ–°**: 2025-09-09